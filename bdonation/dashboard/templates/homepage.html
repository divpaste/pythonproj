{% load static %}
<!DOCTYPE html>

<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link rel="stylesheet" href="{% static 'homepage.css' %}">
</head>

<body>
    <div id="navbar">
        <div id="logoname">
            <button id="icon" type="button"><img
                    src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Heart_coraz%C3%B3n.svg/250px-Heart_coraz%C3%B3n.svg.png"
                    height="30px"></button>
            <h2>BloodConnect</h2>
        </div>
        <div id="userlogout">
            {% if request.user.is_authenticated %}
            <p>Hello, {{request.user}}</p>
            <a id="logoutbtn" type="button" href="{% url 'logout' %}">LOGOUT</a>
            {% else %}
            <p>Hello, Guest</p>
            <a id="logoutbtn" type="button" href="{% url 'login' %}">LOGIN</a>
            {% endif %}
        </div>
    </div>
    <div id="center">
        <div id="map-container">
            <div id="map"></div>
        </div>
    </div>
    <div id="cfooter">
        <div>
            <p id="quote">"The blood you donate gives someone another chance at life. One day that someone may be a close relative,
                a friend, a loved oneâ€”or even you."</p>
        </div>
        <div id="donateinfo">
            <p id="label">Want to donate Blood?</p>
            <a id="donatebtn" type="button" href="{% url 'form' %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-suit-heart-fill" viewBox="0 0 16 16">
                    <path
                        d="M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1" />
                </svg>
                Donate Now</a>
        </div>
    </div>
</body>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-boundary-canvas/leaflet-boundary-canvas.js"></script>
<script>
    const map = L.map('map', { minZoom: 11, maxZoom: 18, maxBoundsViscosity: 1.0 }).setView([18.95, 73.25], 11);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    fetch("{% static 'area.geojson' %}")
        .then(res => res.json())
        .then(geoJSON => {

            const layer = L.geoJSON(geoJSON, {
                style: { color: 'red', weight: 0.8, fillOpacity: 0 }
            }).addTo(map);

            map.setMaxBounds(layer.getBounds());
            map.panInsideBounds(layer.getBounds());
        })
        .catch(err => console.error(err));
</script>

</html>